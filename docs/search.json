[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Crime in NY",
    "section": "",
    "text": "1 Introduction\n\nWhile in the process of deciding on a topic for our project, we received several emails from the Columbia department of Safety about an armed robbery near Columbia campus. This prompted us to get interested in Crime data in and around NYC – in particular, it made us question the safety around Columbia and NYC. We found several very interesting and detailed datasets pertaining to crime in NYC, and quickly focused on NYC incident-level shooting data in the past 10 years to see in how much “danger” we are:\n\n\n\n\n\nIndeed, it seems like there is a relative “hotspot” of shooting incidences near Columbia. The hotspot is mostly several blocks away from campus, but it is broadly insightful to know which areas to potentially avoid.\nThis first broad analysis took us down a rabbit hole of crime and crime-related datasets. We eventually decided to focus on NY State data, as it provides a less localized and more widespread and comprehensive view of crimes over the years. Furthermore, NY State seems more representative of drastically different styles of living, which – we believe – allows for more a contrasting picture. We believe that this is an interesting topic due to its insights into crime trends over time and across different areas.\nOur main dataset pertains to crime statistics per NY State County “Agency” from 1990 to 2022. This not only allows us to analyze the evolution of crime over the past ~30 years per NY county, but also to compare the crime statistics between NYC and NY state. In the following we shall explore questions related to crime rates, patterns, and potential influencing factors. For instance, one might investigate the impact of socioeconomic factors, law enforcement strategies, or demographic changes on crime rates. Another interesting question could be the effect of Covid on the crime statistics and crime type. This dataset allows for a comprehensive analysis of public safety trends, aiding policymakers and the public in understanding and addressing crime issues. Additionally, we supplement our main dataset with data providing population numbers per county in NY State, as we eventually want to compare crime rates per population size."
  },
  {
    "objectID": "data.html#technical-description",
    "href": "data.html#technical-description",
    "title": "2  Data",
    "section": "2.1 Technical Description",
    "text": "2.1 Technical Description\nThe dataset on Index Crimes by County and Agency in New York, is collected by the New York State Division of Criminal Justice Services, which obtains crime reports from more than 500 New York State police and sheriffs’ departments. The data is formatted in a tabular structure, with columns specifying details like county, agency, year, region, and various crime categories. So, the dataset includes geographic information (county and agency), temporal information (year), and crime categories, and contains roughly 22 thousand rows and 15 columns.\nThe reporting system gathers data on seven Index offenses, which are commonly utilized to assess the overall volume of crime. These encompass violent crimes such as murder/non-negligent manslaughter, forcible rape, robbery, and aggravated assault, as well as property crimes like burglary, larceny, and motor vehicle theft.\nThe data has been collected since January 1990. The frequency of updates is on an annual basis, but the individual law enforcement agencies monthly report their total crimes to the New York State Division of Criminal Justice Services. Possible issues with the data could include inconsistencies in reporting methods among different agencies, variations in the definition of crimes, or potential underreporting. We should be cautious about these nuances when interpreting trends or making comparisons across regions and time periods. Indeed, police agencies might encounter challenges in reporting, which could hinder accurate or comprehensive data submission. The figures reflect solely the crimes reported to the police and do not encompass the total number of crimes that took place.\nWe carefully check that the data is consistent, i.e. that the various accumulations performed within the dataset are correct. We find some inconsistencies in the County Total accumulation in Albany from 1990-1997 and Nassau County in 1990. We discuss this further in the missing values analysis.\nSince comparing crime numbers among the different counties only really makes sense if we normalize by population, we supplement our main dataset, Index Crimes by County and Agency in New York, with an official population dataset of the counties in NY state. The population dataset, is a dataset curated by the New York State Department of Labor and started in 2014. It has been updated yearly since then, and contains the (estimated) population of each County in NY state by year since 1970.\nThe dataset contains the FIPS (“Federal Information Processing Standards”) code of each NY state county together with the name of the county (“Geography”), the year and its population estimate. Finally, it includes a column, “Program Type”, detailing the way the population number was estimated. The estimations are interpolations or extrapolations of the 10 year census data of NY State. Before 2010, the estimations are based on interpolations, since for each year in between the actual census data, both previous and next census numbers were known. However, after 2010, the data was kept as point-in-time, and therefore the estimations were based solely on extrapolating the previous census numbers. Notice that it is important to keep the data point-in-time as changing the numbers in hindsight would lead to issues with models that use the extrapolated data numbers.\nThe more detailed methodology of the “intercensal estimation” are detailed here and here. Essentially, for intercensal estimates, they combine the data from the two censuses with death, birth, migration and immigration data to provide an estimate, while for postcensal estimates, they use the previous census data together with the same external sources to provide an estimate.\nWe shall investigate the efficacies of these estimates briefly below and notice that the extrapolation is comparatively worse than the intercensal estmated data."
  },
  {
    "objectID": "data.html#research-plan",
    "href": "data.html#research-plan",
    "title": "2  Data",
    "section": "2.2 Research plan",
    "text": "2.2 Research plan\nTo answer research questions related to crime trends and influencing factors, the first dataset offers a rich source of information. Regarding the temporal analysis, we can examine crime rates over multiple years and then can identify trends and patterns. This enables the assessment of whether crime has increased, decreased, or remained stable over time, providing insights into the effectiveness of law enforcement strategies, changes in societal conditions or from the perspective of pre/during/post covid. Moreover, a geographic analysis is also possible. Indeed, the dataset includes information on crimes reported by different counties and agencies. This allows us to compare crime rates across regions, potentially revealing spatial patterns. For example, we can compare the evolution of crime between NYC and NY state. Understanding variations in crime rates helps tailor interventions to specific areas. The dataset is categorized into specific crime types. So, we can analyze trends in each category individually, helping to identify areas of concern and inform targeted interventions. Furthermore, additional demographic information, if available, could be integrated into the analysis. This might involve exploring correlations between crime rates and socioeconomic factors, population density, or demographic shifts over time. We can also assess the impact of law enforcement strategies by analyzing changes in crime rates following the implementation of specific policies or practices. Since the dataset spans several years, we can conduct longitudinal studies, observing changes and trends over extended periods. This can provide a more nuanced understanding of the factors influencing crime dynamics. By comparing data across different agencies or counties, researchers can identify variations in reporting practices, law enforcement effectiveness, or community characteristics that may influence crime rates. However, it’s crucial to acknowledge potential limitations such as data inconsistencies, reporting biases, and missing information, which may affect the robustness of conclusions drawn from the analysis."
  },
  {
    "objectID": "data.html#missing-value-analysis-and-other-inconsistencies",
    "href": "data.html#missing-value-analysis-and-other-inconsistencies",
    "title": "2  Data",
    "section": "2.3 Missing value analysis and other inconsistencies",
    "text": "2.3 Missing value analysis and other inconsistencies\nWe shall now investigate our two datasets for missing values, inconsistencies and discuss if our findings will impact our research and results.\n\n2.3.1 NY State crime dataset\nWe start by investigating the NY State crime dataset.\nWe find that the data is really well-sourced and only contains NA values for the “Months Reported” column. In particular, upon further investigation, it turns out that a lot of the NA values appear in the accumulated County Total rows, because as soon as an Agency does not indicate the number of months they reported this will lead to an NA value in the accumulation.\nOtherwise, below we have summarized the percentage of NA values in the Months Collected column per county.\n\n\nCode\nna_cols &lt;- colSums(is.na(crime_ny))\nna_rows &lt;- crime_ny[is.na(crime_ny[, names(na_cols[na_cols&gt;0])]), ]\n\nna_rows_cnt &lt;- na_rows %&gt;% group_by(County) %&gt;% summarise(Count = n())\ncrime_ny_cnt &lt;- crime_ny %&gt;% group_by(County) %&gt;% summarise(Count = n())\nna_rows_cnt$pct &lt;- na_rows_cnt$Count/crime_ny_cnt$Count\n\nna_rows_cnt &lt;- na_rows_cnt[order(na_rows_cnt$pct, decreasing = TRUE), ]\n\nggplot(na_rows_cnt, aes(x = reorder(County, -pct), y = pct)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Percentage of Missing \\\"Months Collected\\\" Values by County\",\n       x = \"County\", y = \"Percentage\") +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))\n\n\n\n\n\nWe notice that the five counties with the most missing value percentages in the Months Collected column are the ones, where we do not have Agency-level data, only County total data. We believe these numbers were aggregated from different datasets, which may have varying degree of accuracy with respect to their Months collected information.\nWhile we are not specifically interested in the Months collected column, we need to keep in mind that if for strictly less than 12 months per year data was collected, there might be a skew in the data. We therefore have a quick look at the strictly less than 12 months reported within the non-NA reported values.\n\n\nCode\nless_12 &lt;- crime_ny[(crime_ny$Months.Reported &lt; 12) & !is.na(crime_ny$Months.Reported), ]\nless_12_cnt &lt;- less_12 %&gt;% group_by(County) %&gt;% summarise(Count = n())\n\nno_na_crime_ny_cnt &lt;- crime_ny[!is.na(crime_ny$Months.Reported), ] %&gt;% group_by(County) %&gt;% summarise(Count = n())\nmerged_data &lt;- merge(less_12_cnt, no_na_crime_ny_cnt, by = \"County\", all.x = TRUE)\nmerged_data$pct &lt;- merged_data$Count.x/merged_data$Count.y\n\nmerged_data &lt;- merged_data[order(merged_data$pct, decreasing = TRUE), ]\n\nggplot(merged_data, aes(x = reorder(County, -pct), y = pct)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Percentage of &lt;12 vs =12\\\"Months Collected\\\" by County\",\n       x = \"County\", \n       y = \"Percentage of &lt;12 vs =12 Months Collected\") +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))\n\n\n\n\n\nWe see that the data with less than 12 months collected compared against the data with exactly 12 months collected is negligible. Based on this, we believe that the missing NA values are mostly due to data collection negligency rather than actually varying number of months collected.\nApart from the missing values, we wanted to check that the data aggregation was consistent. We first checked that the columns sum to their respective total columns for each row, and find that there is no inconsistency there:\n\n\nCode\n# Check that other entries sum to Index.Total:\n\n# First check Property Total + Violent Total == Index Total\ncheck_result &lt;- crime_ny %&gt;%\n  group_by(Year, County, Agency) %&gt;%\n  summarise(Sum_Other_Entries = Property.Total + Violent.Total, .groups = \"drop\") %&gt;%\n  left_join(crime_ny, by = c(\"Year\", \"County\", \"Agency\")) %&gt;%\n  mutate(Check = ifelse(Sum_Other_Entries == Index.Total, \"Pass\", \"Fail\"))\ncat(nrow(check_result[check_result$Check!='Pass',]), ' rows with mismatch of Property Total + Violent Total == Index Total.\\n')\n\n\n0  rows with mismatch of Property Total + Violent Total == Index Total.\n\n\nCode\n# First check Murder + Rape + Robbery + Aggravated Assault == Violent Total\ncheck_result &lt;- crime_ny %&gt;%\n  group_by(Year, County, Agency) %&gt;%\n  summarise(Sum_Other_Entries = Murder + Rape + Robbery + Aggravated.Assault, .groups = \"drop\") %&gt;%\n  left_join(crime_ny, by = c(\"Year\", \"County\", \"Agency\")) %&gt;%\n  mutate(Check = ifelse(Sum_Other_Entries == Violent.Total, \"Pass\", \"Fail\"))\ncat(nrow(check_result[check_result$Check!='Pass',]), ' rows with mismatch of Murder + Rape + Robbery + Aggravated Assault == Violent Total. \\n')\n\n\n0  rows with mismatch of Murder + Rape + Robbery + Aggravated Assault == Violent Total. \n\n\nCode\n# First check Burglary + Larceny + Motor.Vehicle.Theft == Property Total\ncheck_result &lt;- crime_ny %&gt;%\n  group_by(Year, County, Agency) %&gt;%\n  summarise(Sum_Other_Entries = Burglary + Larceny + Motor.Vehicle.Theft, .groups = \"drop\") %&gt;%\n  left_join(crime_ny, by = c(\"Year\", \"County\", \"Agency\")) %&gt;%\n  mutate(Check = ifelse(Sum_Other_Entries == Property.Total, \"Pass\", \"Fail\"))\ncat(nrow(check_result[check_result$Check!='Pass',]), ' rows with mismatch of Burglary + Larceny + Motor.Vehicle.Theft == Property Total Total. \\n')\n\n\n0  rows with mismatch of Burglary + Larceny + Motor.Vehicle.Theft == Property Total Total. \n\n\nFinally, we would also like to check whether there is a mismatch between the County Total accumulation and the individual (by-agency) values. It turns out that for the cases in which we have by-agency data, there is a very minor mismatch between the summed data and the County total data in Nassau in 1990 and in Albany between 1990 and 1997. We conjecture that it might be due to data from a missing agency, but could not verify this.\n\n\nCode\n# Find mismatch in County Total vs per-police station:\ncounty_total_entries &lt;- crime_ny %&gt;%\n  filter(Agency == \"County Total\")\n\ncolumns_to_sum &lt;- c(\n  \"Index.Total\", \"Violent.Total\", \"Murder\", \"Rape\",\n  \"Robbery\", \"Aggravated.Assault\", \"Property.Total\",\n  \"Burglary\", \"Larceny\", \"Motor.Vehicle.Theft\"\n)\n\ncrime_ny_not_ct &lt;- crime_ny[crime_ny$Agency!='County Total',] \n\nsummed_data &lt;- crime_ny_not_ct %&gt;%\n  group_by(Year, County) %&gt;%\n  summarise(across(all_of(columns_to_sum), sum), .groups = \"drop\")\n\ncomparison_result &lt;- left_join(summed_data, \n                               county_total_entries, \n                               by = c(\"Year\", \"County\"))\n\ncomparison_result &lt;- comparison_result %&gt;%\n  mutate(\n    Check_Index.Total = ifelse(Index.Total.x == Index.Total.y, \"Match\", \"Mismatch\"),\n    Check_Violent.Total = ifelse(Violent.Total.x == Violent.Total.y, \"Match\", \"Mismatch\"),\n    Check_Murder = ifelse(Murder.x == Murder.y, \"Match\", \"Mismatch\"),\n    Check_Rape = ifelse(Rape.x == Rape.y, \"Match\", \"Mismatch\"),\n    Check_Robbery = ifelse(Robbery.x == Robbery.y, \"Match\", \"Mismatch\"),\n    Check_Aggravated.Assault = ifelse(Aggravated.Assault.x == Aggravated.Assault.y, \"Match\", \"Mismatch\"),\n    Check_Property.Total = ifelse(Property.Total.x == Property.Total.y, \"Match\", \"Mismatch\"),\n    Check_Burglary = ifelse(Burglary.x == Burglary.y, \"Match\", \"Mismatch\"),\n    Check_Larceny = ifelse(Larceny.x == Larceny.y, \"Match\", \"Mismatch\"),\n    Check_Motor.Vehicle.Theft = ifelse(Motor.Vehicle.Theft.x == Motor.Vehicle.Theft.y, \"Match\", \"Mismatch\")\n  )\n\ncheck_columns &lt;- paste0(\"Check_\", columns_to_sum)\nmismatch_rows &lt;- comparison_result %&gt;%\n  rowwise() %&gt;%\n  filter(any(c_across(all_of(check_columns)) == \"Mismatch\"))\n\nmismatch_rows_long &lt;- tidyr::gather(mismatch_rows, key = \"Variable\", value = \"Check_Value\", all_of(check_columns))\nmismatch_rows_long &lt;- mismatch_rows_long[mismatch_rows_long$Check_Value =='Mismatch',] \n\nvariables &lt;- unique(mismatch_rows_long$Variable)\nfor (variable in variables) {\n  variable_name &lt;- gsub(\"^Check_\", \"\", variable)\n  xx &lt;- mismatch_rows_long[mismatch_rows_long$Variable == variable, ]\n  mismatch_rows_long[mismatch_rows_long$Variable == variable,'diff'] &lt;-\n    xx[, paste0(variable_name, \".y\")] - xx[, paste0(variable_name, \".x\")]\n}\n\nmismatch_rows_long_indextot &lt;- mismatch_rows_long[mismatch_rows_long$Variable == 'Check_Index.Total',]\n\nmismatch_rows_long_indextot_long &lt;- tidyr::pivot_longer(mismatch_rows_long_indextot, \n                                                       cols = c(\"Index.Total.x\", \"Index.Total.y\"), \n                                                       names_to = \"Category\", \n                                                       values_to = \"Value\")\n\n#mismatch_rows_long_indextot &lt;- subset(mismatch_rows_long_indextot, County=='Albany')\n\nggplot(mismatch_rows_long_indextot, \n       aes(x = interaction(Year, County))) +\n  geom_bar(aes(y = Index.Total.y, \n               fill = \"County Total values\"), \n           stat = \"identity\", \n           position = \"dodge\") +\n  geom_bar(aes(y = Index.Total.x, \n               fill = \"Sum of Reported Values by Agencies\"), \n           stat = \"identity\", \n           position = \"dodge\") +\n  labs(title = \"Difference between County total values and summed up provided values for Albany county\", \n       x = \"Year + County\", \n       y = \" Number of Crimes\") +\n  scale_fill_manual(values = c(\"County Total values\" = \"red\", \n                               \"Sum of Reported Values by Agencies\" = \"blue\")) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) \n\n\n\n\n\nIn the plot above we compare for each inconsistency the discrepancy in the total crime number. We can observe that the inconsistency is very minor and will not affect our analysis below.\n\n\n2.3.2 NY State population dataset\nWe now focus on the population dataset.\nWe first plot the percentage of the available (i.e. non-NA) data:\n\n\nCode\npop_ny &lt;- read.csv('data/Annual_Population_Estimates_for_New_York_State_and_Counties__Beginning_1970.csv')\npop_ny$FIPS.Code &lt;- substr(pop_ny$FIPS.Code, 3, nchar(pop_ny$FIPS.Code))\n\nmissing_percentage &lt;- sapply(pop_ny, \n                             function(x) sum(is.na(x) | x == \"\") / length(x) * 100)\nresult &lt;- data.frame(Column = names(missing_percentage), \n                     MissingPercentage = missing_percentage)\nresult &lt;- result[order(-result$MissingPercentage), ]\n\nggplot(result, \n       aes(x = Column, \n           y = 100 - MissingPercentage)) +\n  geom_bar(stat = \"identity\", \n           fill = \"lightblue\") +\n  geom_text(aes(label = sprintf(\"%.1f%%\", 100 - MissingPercentage)),\n            vjust = 1.5, size = 5) +  # Add percentage labels\n  labs(title = \"Percentage of Available Data in Each Column\",\n       x = \"Column\",\n       y = \"Available Percentage\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\nIt turns out that we do not have any missing values.\nNonetheless, as mentioned above, the population datasets contain estimates of the population for the years within/outside of census data. We want to visualize how well these estimations perform, and whether there are large discrepancies with the “actual” (we take the census numbers as the ground truth) population numbers.\nTo do so we focus on the numbers for the whole state as a representative. Furthermore, we restrict to data after 1990, as that is the time period for which we have NY State crime data:\n\n\nCode\npop_ny_full_state &lt;- pop_ny[(pop_ny$Geography == 'New York State') & (pop_ny$Year &gt;= 1990), ]\n\nggplot(pop_ny_full_state, \n                        aes(x = Year, \n                            y = Population, \n                            fill = Program.Type)) +\n  geom_col(position = \"dodge\", \n           width = 0.9) + \n  labs(title = \"Population (estimate) per Year\", \n       x = \"Year\", \n       y = \"Population\") +\n  scale_fill_manual(values = c(\"Census Base Population\" = \"blue\", \n                              \"Postcensal Population Estimate\" = \"red\",\n                              'Intercensal Population Estimate' = 'orange')) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n\n\n\n\n\nNotice that we have estimates even for the census years (1990, 2000, 2010 and 2020); Their respective bars are split into two (and of different color). The intercensal population estimates are seem like they are quite in line with the census data (which makes sense), while there is a small jump between the 2019 estimate and the 2020 census data. As we remarked above, this dataset was first created in 2014 and kept as point-in-time. Therefore, the estimates will be postcensal for anything after 2010.\nWe conclude that the estimates will certainly be good enough for our purposes. The crime/population will divide a small-ish number by a large number and therefore small errors in the population estimate will not affect any conclusions we shall draw in the following.\n\n\nCode\n#\n# \n# census_years &lt;- unique(pop_ny_full_state[pop_ny_full_state$Program.Type == 'Census Base Population', ]$Year)\n# \n# pop_ny_full_state_cens_yrs &lt;- subset(pop_ny_full_state, pop_ny_full_state$Year %in% census_years)\n# \n# pop_ny_full_state_cens_yrs_wide &lt;- pivot_wider(pop_ny_full_state_cens_yrs, \n#                        names_from = Program.Type, \n#                        values_from = Population)\n# colnames(pop_ny_full_state_cens_yrs_wide)\n# \n# names(pop_ny_full_state_cens_yrs_wide)\n# \n# ggplot(pop_ny_full_state_cens_yrs_wide, aes(x = Year)) +\n#   geom_point(aes(y = `Census Base Population`, color = \"Census Base Population\"), \n#              position = position_dodge(width = 0.4)) +\n#   geom_point(aes(y = `Intercensal Population Estimate`, color = \"Intercensal Estimate\"), \n#              position = position_dodge(width = 0.2)) +\n#   geom_point(aes(y = `Postcensal Population Estimate`, color = \"Postcensal Estimate\"), \n#              position = position_dodge(width = -0.2)) +\n#   labs(title = \"A\", x = \"B\", y = \"C\") +\n#   scale_color_manual(values = c(\"Census Base Population\" = \"blue\", \n#                                 \"Intercensal Estimate\" = \"orange\",\n#                                 \"Postcensal Estimate\" = \"red\"),\n#                      name = \"Legend Title\") +\n#   theme_minimal() +\n#   theme(axis.text.x = element_text(angle = 45, hjust = 1))"
  }
]